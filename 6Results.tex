% !TeX root = ./0Base.tex

\chapter{Results}\label{cha:results}

\section{Performance}

WIP

% Table \ref{tab:resultsFromFile} shows an average response time from the 10 tests mentioned in the previous chapters.

% \input{figures/resultsDelete.tex}
% \input{tables/resultsDelete.tex}

% \input{figures/resultsGet.tex}
% \input{tables/resultsGet.tex}

% \input{figures/resultsGetMany.tex}
% \input{tables/resultsGetMany.tex}

% \input{figures/resultsPost.tex}
% \input{tables/resultsPost.tex}

% \input{figures/resultsPut.tex}
% \input{tables/resultsPut.tex}

\section{Security}
\subsection{Security Misconfiguration}
\subsubsection{Django}
Django has one configuration file, generated automatically at the project creation. At the starting lines of settings.py a few important variables and comments are placed (listing \ref{lst:djangoSettings}).
\input{listings/djangoSettings.tex}.
As we can see, the creators of Django clearly want the developers to prevent some security vulnerabilities, by placing \lstinline{SECURITY WARNING} comments above two crucial variables - \lstinline{SECRET_KEY} and \lstinline{DEBUG}.
\lstinline{SECRET_KEY} is used in:
\begin{itemize}
    \item Generating session tokens
    \item Generating password reset tokens
    \item Ensuring that data passed from django forms is not changed
    \item Generating secret URLs for temporary access to a protected resource (for example a file)
    \item And any other cryptographic signing, unless a developer provides a different key
          % TODO ref https://docs.djangoproject.com/en/3.2/ref/settings/#secret-key 
          %  https://docs.djangoproject.com/en/3.2/topics/signing/
\end{itemize}.
All of them are very serious risks and should be avoided by any means. App created for this research is tiny does not have any serious logic other than working on a database model, so cryptographic signing is not used at all. For any commercial applications leaking this variable could cause a lot of harm.
The second risky variable - \lstinline{DEBUG} - is responsible for turning on and off a debug mode. When set to True, whenever an error happens Django will display a detailed traceback, including parts of the applications source code and environment variables (such as Django settings).
Django developers thought about it being a little secure in case of accidental leakage by excluding from the message variables containing the following strings:
\begin{itemize}
    \item 'API'
    \item 'KEY'
    \item 'PASS'
    \item 'SECRET'
    \item 'SIGNATURE'
    \item 'TOKEN'
\end{itemize}
% TODO show a screen where if(id === 10): admin = True

Third important variable that cannot be forgotten is \lstinline{ALLOWED_HOSTS} (without \lstinline{SECURITY WARNING} comment, as it is set to an empty array by default). This variable is meant to be a list of strings presenting host names that Django can send responses to. If a given host is not on the list and tries to request a resource, response with status 400 is sent immediately. When \lstinline{DEBUG} is set to True and this variable is empty, the only way to reach the app is by requesting localhost.

To help the developers, Django offers a command \lstinline{python3 manage.py check --deploy} command.
\input{listings/djangoCheckDeploy.tex}
% https://docs.djangoproject.com/en/3.2/howto/deployment/checklist/
% python3 manage.py check --deploy
% https://hdivsecurity.com/owasp-security-misconfiguration
\subsubsection{ASP.NET}
\subsubsection{Express.js}
\subsection{Injection}
\subsubsection{Django}
\subsubsection{ASP.NET}
\subsubsection{Express.js}
% DJANGO
% https://hdivsecurity.com/sql-injection-prevention
% https://docs.djangoproject.com/en/3.2/topics/security/#sql-injection-protection
% Injections can be done using inserting raw() queries
\subsection{Insufficient Logging}
\subsubsection{Django}
\subsubsection{ASP.NET}
\subsubsection{Express.js}
% DJANGO
% https://docs.djangoproject.com/en/3.0/topics/logging/
% https://pypi.org/project/django-automated-logging/
% https://pypi.org/project/django-log-viewer/
% When your application has insufficient logging and monitoring, attacks and suspicious activity can go unnoticed. By default, Django uses the Python native logging module for system logging. 
% django.security.* logging messages.

% ASPNET
% https://www.infoq.com/presentations/owasp-top-10-vulnerabilities-2017/
